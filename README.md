# æƒ…æ™¯
* é¡¹ç›®ä¸­éœ€è¦è·å–ç©å®¶çš„å®šä½ä¿¡æ¯ï¼Œä¸Šä¼ ç»™æœåŠ¡å™¨ï¼Œç”¨äºè®¡ç®—ç©å®¶ä¹‹é—´çš„è·ç¦»ã€‚ä¸€å¼€å§‹ï¼Œè®©æˆ‘è”æƒ³èµ·æ»´æ»´çº¦è½¦çš„åœºæ™¯ï¼Œåœ°å›¾ä¸Šæ˜¾ç¤ºä¸€è¾†å¾ˆcuteçš„å°è½¦ï¼Œæ…¢æ…¢å‘ä½ é è¿‘ï¼Œè¿˜æ˜¯è›®æœ‰æ„æ€çš„ã€‚<br> å†å‘ç­–åˆ’ç¡®å®šæˆ‘ä»¬çš„ä¸šåŠ¡åï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šï¼Œåªç”¨è·å–ç”¨æˆ·å®šä½ä¿¡æ¯å³å¯ï¼Œä¸ç”¨å®æ—¶æ˜¾ç¤ºç”¨æˆ·ä½ç½®ä¿¡æ¯ï¼ˆç†ç”±æ˜¯ï¼šæ€•ç”¨æˆ·ä¹‹é—´ç›¸äº’æ‹‰ä»‡æ¨åï¼Œç›´æ¥å†²åˆ°å¯¹æ–¹å®¶é‡ŒğŸ˜€ï¼‰ï¼åŠŸèƒ½ç›®å‰å·²ç»æ˜¯ç¨³å®šæ¥å…¥ï¼Œå¾—ç©ºè¿˜æ˜¯æŠŠå®šä½ã€ç¼–ç ã€ç‚¹å‡»æ·»åŠ è‡ªå®šä¹‰å¤§å¤´é’ˆï¼ˆåŒ…æ‹¬ä»å¤©è€Œé™çš„æ•ˆæœï¼‰å®ç°ï¼Œåœ¨è¿™é‡Œè·Ÿå¤§å®¶åˆ†äº«ï¼Œä¸è¶³ä¹‹å¤„ï¼Œæœ›æŒ‡æ­£ï¼ğŸ˜€

# å†…å®¹
* iOSä»6.0å¼€å§‹åœ°å›¾æ•°æ®ä¸å†ç”±è°·æ­Œé©±åŠ¨ï¼Œè€Œæ˜¯æ”¹ç”¨è‡ªå®¶åœ°å›¾ï¼Œåœ¨å›½å†…å®ƒçš„æ•°æ®æ˜¯ç”±é«˜å¾·åœ°å›¾æä¾›çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœåœ¨iOS6.0ä¹‹å‰è¿›è¡Œåœ°å›¾å¼€å‘çš„è¯ä½¿ç”¨æ–¹æ³•ä¼šæœ‰æ‰€ä¸åŒï¼ŒåŸºäºç›®å‰çš„æƒ…å†µå…¶å®ä½¿ç”¨iOS6.0ä¹‹å‰ç‰ˆæœ¬çš„ç³»ç»ŸåŸºæœ¬å·²ç»å¯¥å¯¥æ— å‡ äº†ï¼Œæ‰€æœ‰åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ä¸ä¼šå†é’ˆå¯¹iOS5åŠä¹‹å‰ç‰ˆæœ¬çš„åœ°å›¾å¼€å‘è¿›è¡Œä»‹ç»ã€‚åœ¨iOSä¸­è¿›è¡Œåœ°å›¾å¼€å‘ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥åˆ©ç”¨MapKitæ¡†æ¶è¿›è¡Œåœ°å›¾å¼€å‘ï¼Œåˆ©ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¯¹åœ°å›¾è¿›è¡Œç²¾å‡†çš„æ§åˆ¶ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥è°ƒç”¨è‹¹æœå®˜æ–¹è‡ªå¸¦çš„åœ°å›¾åº”ç”¨ï¼Œä¸»è¦ç”¨äºä¸€äº›ç®€å•çš„åœ°å›¾åº”ç”¨ï¼ˆä¾‹å¦‚ï¼šè¿›è¡Œå¯¼èˆªè¦†ç›–ç‰©å¡«å……ç­‰ï¼‰ï¼Œæ— æ³•è¿›è¡Œç²¾ç¡®çš„æ§åˆ¶ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯MapKitæ¡†æ¶è¿›è¡Œå¼€å‘ã€‚


### æ•ˆæœå›¾
   Â ![](https://github.com/maojingios/MKMap/blob/master/MKMap/MKMapLocation.gif)


### 1.é…ç½®info.plist

      å¯ä»¥é€šè¿‡é…ç½®NSLocationAlwaysUsageDescriptionæˆ–è€…NSLocationWhenInUseUsageDescriptionæ¥å‘Šè¯‰ç”¨æˆ·ä½¿ç”¨å®šä½æœåŠ¡çš„ç›®çš„ï¼Œå¹¶ä¸”æ³¨æ„è¿™ä¸ªé…ç½®æ˜¯å¿…é¡»
      çš„ï¼Œå¦‚æœä¸è¿›è¡Œé…ç½®åˆ™é»˜è®¤æƒ…å†µä¸‹åº”ç”¨æ— æ³•ä½¿ç”¨å®šä½æœåŠ¡ï¼Œæ‰“å¼€åº”ç”¨ä¸ä¼šç»™å‡ºæ‰“å¼€å®šä½æœåŠ¡çš„æç¤ºï¼Œé™¤éå®‰è£…åè‡ªå·±è®¾ç½®æ­¤åº”ç”¨çš„å®šä½æœåŠ¡ã€‚
 Â  Â  Â  Â  
### 2.å¼•å…¥å¤´æ–‡ä»¶

     #import <CoreLocation/CoreLocation.h>
     #import <MapKit/MapKit.h> 
 Â  Â  
### 3.åˆ¤æ–­

      if (![CLLocationManager locationServicesEnabled]) {//åˆ¤æ–­å®šä½æ˜¯å¦å¯ç”¨
          NSLog(@"please open location service");
      }
      if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusNotDetermined) {//ç”¨æˆ·æˆæƒ
          [_locationManager requestWhenInUseAuthorization];
      }else if ([CLLocationManager authorizationStatus] ==kCLAuthorizationStatusAuthorizedWhenInUse){
          _locationManager.delegate = self;
          _locationManager.desiredAccuracy = kCLLocationAccuracyBest;
          CLLocationDistance distance = 0.5;
          _locationManager.distanceFilter = distance;
          [_locationManager startUpdatingLocation];
 Â  Â  Â } 
### 4.å®ç°è‡ªå®šä¹‰å¤§å¤´é’ˆ

      -(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
          //åŒºåˆ«å½“å‰ç©å®¶ä½ç½®
          if ([annotation isKindOfClass:[MKinAnnotation class]]) {
              static NSString * identify = @"annotation";
              MKAnnotationView * annotationView = [_mapView dequeueReusableAnnotationViewWithIdentifier:identify];
              if (!annotationView) {
                  annotationView = [[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:identify];
                  annotationView.canShowCallout = true;
                  annotationView.calloutOffset = CGPointMake(0, 0);
                  annotationView.leftCalloutAccessoryView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"coffe"]];
              }
              annotationView.annotation = annotation;
              annotationView.image = ((MKinAnnotation *)annotation).image;
              return annotationView;
          }else return nil;
      }
 Â  Â  Â 
 Â  Â  Â 
### 5.ä¼˜åŒ–ï¼ˆä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šå‘ç°å†…å­˜æš´å¢ï¼‰

      #pragma mark - æ˜¾ç¤ºåŒºåŸŸå‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨
      -(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated{
          //å†…å­˜ä¼˜åŒ–
          [_mapView removeFromSuperview];
          [self.view addSubview:_mapView];
      }

# æ€»ç»“

ä»¥ä¸Šæ˜¯éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼Œæ¶‰åŠæƒé™è®¾ç½®ã€å¤§å¤´é’ˆçš„å¤ç”¨å’Œè‡ªå®šä¹‰ï¼ˆæ˜¯ä¸æ˜¯æƒ³èµ·äº†UITableViewCellçš„å¤ç”¨ï¼‰ã€ä»¥åŠå†…å­˜ä¼˜åŒ–ï¼ä¸ºæ¯”è¾ƒåŸºç¡€çš„å†…å®¹ã€‚å¸Œæœ›å¤§å®¶å¤šå¤šæŒ‡æ•™ã€‚


